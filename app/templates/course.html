{% extends "base.html" %}
{% block content %}
  <div class="mb-6">
    <div class="text-zinc-400 text-sm"><a class="hover:underline" href="/">Courses</a> /</div>
    <h1 class="text-2xl font-semibold">{{ course.title }}</h1>
  </div>

  <div class="space-y-4">
    {% for section, items in sections.items() %}
      <div class="rounded-lg bg-zinc-900 border border-zinc-800 overflow-hidden">
        <div class="px-4 py-3 border-b border-zinc-800 font-medium">{{ section }}</div>
        <div class="divide-y divide-zinc-800">
          {% for it in items %}
            {% set l = it.lesson %}
            {% set p = it.progress %}
            <a href="/lesson/{{ l.id }}" class="flex items-center justify-between px-4 py-3 hover:bg-zinc-800/40">
              <div>
                <div class="font-medium">{{ l.title }}</div>
                <div class="text-xs text-zinc-500">{{ l.path }}</div>
              </div>
              <div class="text-xs">
                {% if p and p.completed %}
                  <span class="px-2 py-1 rounded bg-emerald-900 text-emerald-200 border border-emerald-800">Done</span>
                {% elif p %}
                  <span class="px-2 py-1 rounded bg-zinc-800 text-zinc-200 border border-zinc-700">{{ (p.position_seconds // 1) | int }}s</span>
                {% else %}
                  <span class="px-2 py-1 rounded bg-zinc-900 text-zinc-500 border border-zinc-800">New</span>
                {% endif %}
              </div>
            </a>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock %}
